(function(){/*
 bigwig.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var aa=this;function l(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?d[g]?d=d[g]:d=d[g]={}:d[g]=b}function m(a,b){function c(){}c.prototype=b.prototype;a.Fa=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.za=function(a,c,f){for(var e=Array(arguments.length-2),h=2;h<arguments.length;h++)e[h-2]=arguments[h];return b.prototype[c].apply(a,e)}};function ba(a,b){u.Exception.apply(this,arguments);this.name="BigwigException"}m(ba,u.Exception);function q(a,b){this.c=a|0;this.a=b|0}var ca={},t={};function v(a){if(-128<=a&&128>a){var b=ca[a];if(b)return b}b=new q(a|0,0>a?-1:0);-128<=a&&128>a&&(ca[a]=b);return b}function w(a){isNaN(a)||!isFinite(a)?a=x():a<=-da?a=z():a+1>=da?(t[ea]||(t[ea]=new q(-1,2147483647)),a=t[ea]):a=0>a?A(w(-a)):new q(a%B|0,a/B|0);return a}
function fa(a,b){if(0==a.length)throw Error("number format error: empty string");var c=b||10;if(2>c||36<c)throw Error("radix out of range: "+c);if("-"==a.charAt(0))return A(fa(a.substring(1),c));if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);for(var d=w(Math.pow(c,8)),g=x(),f=0;f<a.length;f+=8){var e=Math.min(8,a.length-f),h=parseInt(a.substring(f,f+e),c);8>e?(e=w(Math.pow(c,e)),g=C(D(g,e),w(h))):(g=D(g,d),g=C(g,w(h)))}return g}var B=4294967296,da=B*B/2;
function x(){t[ga]||(t[ga]=v(0));return t[ga]}function E(){t[ha]||(t[ha]=v(1));return t[ha]}function ia(){t[ja]||(t[ja]=v(-1));return t[ja]}function z(){t[ka]||(t[ka]=new q(0,-2147483648));return t[ka]}function F(a){return a.a*B+(0<=a.c?a.c:B+a.c)}
q.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(G(this))return"0";if(0>this.a){if(H(this,z())){var b=w(a),c=I(this,b),b=J(D(c,b),this);return c.toString(a)+b.c.toString(a)}return"-"+A(this).toString(a)}for(var c=w(Math.pow(a,6)),b=this,d="";;){var g=I(b,c),f=(J(b,D(g,c)).c>>>0).toString(a),b=g;if(G(b))return f+d;for(;6>f.length;)f="0"+f;d=""+f+d}};function G(a){return 0==a.a&&0==a.c}function H(a,b){return a.a==b.a&&a.c==b.c}
function la(a){t[ma]||(t[ma]=v(16777216));return 0>na(a,t[ma])}function na(a,b){if(H(a,b))return 0;var c=0>a.a,d=0>b.a;return c&&!d?-1:!c&&d?1:0>J(a,b).a?-1:1}function A(a){return H(a,z())?z():C(new q(~a.c,~a.a),E())}function C(a,b){var c=a.a>>>16,d=a.a&65535,g=a.c>>>16,f=b.a>>>16,e=b.a&65535,h=b.c>>>16,n,k;k=0+((a.c&65535)+(b.c&65535));n=0+(k>>>16);n+=g+h;g=0+(n>>>16);g+=d+e;d=0+(g>>>16);d=d+(c+f)&65535;return new q((n&65535)<<16|k&65535,d<<16|g&65535)}function J(a,b){return C(a,A(b))}
function D(a,b){if(G(a)||G(b))return x();if(H(a,z()))return 1==(b.c&1)?z():x();if(H(b,z()))return 1==(a.c&1)?z():x();if(0>a.a)return 0>b.a?D(A(a),A(b)):A(D(A(a),b));if(0>b.a)return A(D(a,A(b)));if(la(a)&&la(b))return w(F(a)*F(b));var c=a.a>>>16,d=a.a&65535,g=a.c>>>16,f=a.c&65535,e=b.a>>>16,h=b.a&65535,n=b.c>>>16,k=b.c&65535,p,r,y,Ba;Ba=0+f*k;y=0+(Ba>>>16);y+=g*k;r=0+(y>>>16);y=(y&65535)+f*n;r+=y>>>16;y&=65535;r+=d*k;p=0+(r>>>16);r=(r&65535)+g*n;p+=r>>>16;r&=65535;r+=f*h;p+=r>>>16;r&=65535;p=p+(c*
k+d*n+g*h+f*e)&65535;return new q(y<<16|Ba&65535,p<<16|r)}
function I(a,b){if(G(b))throw Error("division by zero");if(G(a))return x();if(H(a,z())){if(H(b,E())||H(b,ia()))return z();if(H(b,z()))return E();var c;c=1;if(0==c)c=a;else{var d=a.a;c=32>c?new q(a.c>>>c|d<<32-c,d>>c):new q(d>>c-32,0<=d?0:-1)}c=I(c,b);d=1;if(0!=d){var g=c.c;c=32>d?new q(g<<d,c.a<<d|g>>>32-d):new q(0,g<<d-32)}if(H(c,x()))return 0>b.a?E():ia();d=J(a,D(b,c));return C(c,I(d,b))}if(H(b,z()))return x();if(0>a.a)return 0>b.a?I(A(a),A(b)):A(I(A(a),b));if(0>b.a)return A(I(a,A(b)));g=x();for(d=
a;0<=na(d,b);){c=Math.max(1,Math.floor(F(d)/F(b)));for(var f=Math.ceil(Math.log(c)/Math.LN2),f=48>=f?1:Math.pow(2,f-48),e=w(c),h=D(e,b);0>h.a||0<na(h,d);)c-=f,e=w(c),h=D(e,b);G(e)&&(e=E());g=C(g,e);d=J(d,h)}return g}var ea=1,ka=2,ga=3,ha=4,ja=5,ma=6;function K(a){var b=this;u.each(a,function(a,d){b[a]=d})}K.prototype.toString=function(){return JSON.stringify(this,function(a,b){return b instanceof q?0==b.a?0<=b.c?b.c:B+b.c:b.toString():b})};function L(a,b,c,d){c=new DataView(c);return M(a,b,c,d)}
function M(a,b,c,d){var g=!d,f={},e=0,h;u.each(b,function(a,b){var d;switch(b){case 8:d=c.getUint32(e,!g);var r=c.getUint32(e+4,!g);d=g?new q(r,d):new q(d,r);break;case 4:d=c.getUint32(e,!g);break;case 2:d=c.getUint16(e,!g);break;case 1:d=c.getUint8(e);break;case -8:d=c.getFloat64(e,!g);break;case -4:d=c.getFloat32(e,!g);break;case 0:for(h=[];e<c.byteLength&&(0==h.length||0!=h[h.length-1]);++e)h.push(c.getUint8(e));d=String.fromCharCode.apply(null,h);break;default:h=new Uint8Array(c.buffer,c.byteOffset+
e,b),d=h.indexOf(0),0<=d&&(h=h.subarray(0,d)),d=String.fromCharCode.apply(null,h)}e+=Math.abs(b);f[a]=d});return u.reflection.applyConstructor(a,[f])}function N(a){var b=0;a=a.Fields;if(!a)throw new ba("Cannot compute size of type (fields not defined)");u.each(a,function(a,d){b+=Math.abs(d)});return b};function O(){K.apply(this,arguments)}m(O,K);function P(){}Object.defineProperties(P.prototype,{min:{get:function(){return this.value(Q.MIN)}},max:{get:function(){return this.value(Q.MAX)}},sum:{get:function(){return this.value(Q.SUM)}},avg:{get:function(){return this.value(Q.AVG)}},sumsq:{get:function(){return this.value(Q.SUMSQ)}},norm:{get:function(){return this.value(Q.NORM)}},cnt:{get:function(){return this.value(Q.CNT)}}});var Q={MIN:0,MAX:1,SUM:2,SUMSQ:3,AVG:4,NORM:5,CNT:6};
P.prototype.value=function(){throw new ba("Abstract method not implemented");};P.prototype.toString=function(){return JSON.stringify(this.toJSON())};P.prototype.toJSON=function(){return{chr:this.chrName,start:this.start,end:this.end,value:this.value}};function oa(a){this.c=a}function pa(a){this.children=a?a.children||null:null}function qa(a,b){if(a.c){var c=function(a){b.call(null,a)||a.children&&a.children.length&&u.fast.forEach(a.children,c)};c(a.c)}};function ra(a){oa.apply(this,arguments)}m(ra,oa);function sa(a,b){var c=[];qa(a,function(a){if(b&&(a.M<b.chr||a.O>b.chr)||b&&(a.O==b.chr&&a.A>=b.end||a.M==b.chr&&a.B<=b.start))return!0;if(a.children&&a.children.length)return!1;c.push(a)});return c}function ta(a){pa.apply(this,a);this.C=a.C;this.O=a.O;this.M=a.M;this.A=a.A;this.B=a.B;this.l=a.l;this.L=a.L;this.K=a.K}m(ta,pa);function R(){K.apply(this,arguments)}m(R,K);R.Fields={J:4,start:4,end:4,va:4,ua:4,type:1,N:1,da:2};function S(a,b,c,d,g){this.ka=a;this.aa=b;this.j=c;this.pa=d;this.m=g||null}m(S,P);Object.defineProperties(S.prototype,{chrName:{get:function(){return this.m?this.m.U(this.chr).key:this.chr}},chr:{get:function(){return this.aa.J}},start:{get:function(){return void 0!=this.j.ba?this.j.ba:this.ka.A+this.aa.va*this.pa}},end:{get:function(){return void 0!=this.j.na?this.j.na:this.start+this.aa.ua}}});
S.prototype.value=function(a){var b=Q;switch(a){case b.SUMSQ:return this.j.value*this.j.value;case b.NORM:return Math.abs(this.j.value);case b.CNT:return 1;default:return this.j.value}};function ua(){K.apply(this,arguments)}m(ua,K);ua.Fields={V:4,la:4,da:8,I:4,A:4,G:4,B:4,Ba:8,Ea:4,N:4};function va(){K.apply(this,arguments)}m(va,K);va.Fields={J:4,start:4,end:4,ia:4,ga:-4,fa:-4,W:-4,X:-4};function T(){O.apply(this,arguments)}m(T,O);T.Fields={ba:4,value:-4};function wa(){K.apply(this,arguments)}m(wa,K);wa.Fields={C:1,N:1,count:2};function U(){O.apply(this,arguments)}m(U,O);U.Fields={value:-4};function V(a){oa.apply(this,arguments);this.T=this.a=null}m(V,oa);function xa(a){pa.apply(this,arguments);this.key=a.key;this.chrId=a.J;this.chrSize=a.ma}m(xa,pa);V.prototype.U=function(a){if("number"==typeof a)return ya(this),this.a[a];za(this);return this.T[a]};Object.defineProperties(V.prototype,{leaves:{get:function(){za(this);return u.map(this.T,function(a){return a})}}});function za(a){if(!a.T){var b={};qa(a,function(a){a.children||(b[a.key]=a)});a.T=b}}
function ya(a){if(!a.a){var b={};qa(a,function(a){a.children||(b[a.chrId]=a)});a.a=b}};function Aa(){K.apply(this,arguments)}m(Aa,K);Aa.Fields={qa:8,ga:-8,fa:-8,W:-8,X:-8};function Ca(){K.apply(this,arguments)}m(Ca,K);Ca.Fields={wa:4,N:4,l:8,ta:8};function Da(){K.apply(this,arguments)}m(Da,K);Da.Fields={V:4,la:4,ea:4,Ia:4,da:8,N:8};function W(){K.apply(this,arguments)}m(W,K);Object.defineProperties(W.prototype,{ra:{get:function(){return 2291137574==this.V}},v:{get:function(){return!this.ra}}});W.Fields={V:4,version:2,P:2,oa:8,Da:8,ca:8,Ca:2,Aa:2,ya:8,Ga:8,Ha:4,N:8};function Ea(){K.apply(this,arguments)}m(Ea,K);function Fa(a,b,c){return M(Ea,{key:b,sa:8},a,c)};function Ga(){K.apply(this,arguments)}m(Ga,K);Ga.Fields={I:4,A:4,G:4,B:4,l:8};function Ha(a,b){return M(Ga,Ga.Fields,a,b)};function X(){O.apply(this,arguments)}m(X,O);X.Fields={ba:4,na:4,value:-4};var Ia=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function Ja(a,b){var c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(a,b,d,h,n,k,p,r){if("%"==k)return"%";var y=c.shift();if("undefined"==typeof y)throw Error("[goog.string.format] Not enough arguments");arguments[0]=y;return Y[k].apply(null,arguments)})}
var Y={s:function(a,b,c){return isNaN(c)||""==c||a.length>=c?a:a=-1<b.indexOf("-",0)?a+Ia(" ",c-a.length):Ia(" ",c-a.length)+a},f:function(a,b,c,d,g){d=a.toString();isNaN(g)||""==g||(d=parseFloat(a).toFixed(g));var f;f=0>a?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=a&&(d=f+d);if(isNaN(c)||d.length>=c)return d;d=isNaN(g)?Math.abs(a).toString():Math.abs(a).toFixed(g);a=c-d.length-f.length;0<=b.indexOf("-",0)?d=f+d+Ia(" ",a):(b=0<=b.indexOf("0",0)?"0":" ",d=f+Ia(b,a)+d);return d},d:function(a,
b,c,d,g,f,e,h){return Y.f(parseInt(a,10),b,c,d,0,f,e,h)}};Y.i=Y.d;Y.u=Y.d;function Ka(){K.apply(this,arguments)}m(Ka,K);function La(a,b,c){return M(Ka,{key:b,J:4,ma:4},a,c)};function Ma(){K.apply(this,arguments)}m(Ma,K);Ma.Fields={I:4,A:4,G:4,B:4,l:8,L:8};function Na(a,b){return M(Ma,Ma.Fields,a,b)};function Oa(){K.apply(this,arguments)}m(Oa,K);Oa.Fields={C:1,N:1,count:2};function Pa(a,b,c){this.R=a;this.D=b||null;this.c=null;var d=this;this.Z=new Promise(function(a){void 0!=d.c?a(d.c):d.get(0,1,function(b,c){var h=c.getResponseHeader("Content-Range");d.c=fa(h.substr(h.indexOf("/")+1));a(d.c)})});this.Y=c&&0<c?1024*c:Qa;this.a=0===c?this.get:this.S;this.H={}}
var Qa=524288,Ra=N(W),Sa=N(Ca),Ta=N(Aa),Ua=N(Da),Va=N(Oa),Wa=N(ua),Xa=N(wa),Ya=N(Ga),Za=N(Ma),$a=N(R),ab=N(va),bb={1:[X,function(a,b){return M(X,X.Fields,a,b)},function(a,b){return L(X,X.Fields,a,b)}],2:[T,function(a,b){return M(T,T.Fields,a,b)},function(a,b){return L(T,T.Fields,a,b)}],3:[U,function(a,b){return M(U,U.Fields,a,b)},function(a,b){return L(U,U.Fields,a,b)}]};
Pa.prototype.get=function(a,b,c){function d(){var a=new XMLHttpRequest;a.open("GET",n,!0);g.D||a.setRequestHeader("Range",Ja("bytes=%s-%s",e,h));a.responseType="arraybuffer";a.onload=function(a){c(a.target.response,a.target)};a.onreadystatechange=function(){4===a.readyState&&200!==a.status&&206!=a.status&&(--f,f?(console.log("Failed: Range "+Ja("bytes=%s-%s",e,h)+"; retrying..."),d()):console.error("Failed: Range "+Ja("bytes=%s-%s",e,h)))};a.send()}var g=this,f=10,e=a instanceof q?a.toString():a,
h=b instanceof q?J(b,v(1)).toString():b-1,n=this.D?Ja("%s?r=%s-%s&q=%s",this.D,e,h,this.R):this.R;d()};
Pa.prototype.S=function(a,b,c){var d=this;if(void 0==d.c)d.Z.then(function(){d.S(a,b,c)});else{var g=a instanceof q?a:w(a),f=b instanceof q?b:w(b),e=w(this.Y),h=I(g,e),n=I(f,e),k=D(h,e),p=C(k,e);H(h,n)?(e=h.toString(),h=this.H[e],h||(h=new Promise(function(a){0<na(p,d.c)&&(p=d.c);d.get(k,p,function(b){a(b)})}),this.H[e]=h),h.then(function(a){var b=F(J(g,k)),d=F(J(f,k));c(a.slice(b,d))})):d.get(a,b,c)}};
function cb(a){return new Promise(function(b){a.a(0,Ra,function(a){var d=(new DataView(a)).getUint32(0);a=L(W,W.Fields,a,2291137574!=d);a.V=d;b(a)})})}function db(a,b,c){if(c>=b.P||0>c)throw new ba("Bigwig: invalid zoom index");return new Promise(function(d){a.a(Ra+c*Sa,Ra+(c+1)*Sa,function(a){a=L(Ca,Ca.Fields,a,b.v);d(a)})})}
function eb(a,b){return new Promise(function(c){var d=Array(b.P);u.async.for(b.P,function(c){return new Promise(function(f){db(a,b,c).then(function(a){d[c]=a;f()})})}).then(function(){c(d)})})}function fb(a,b){return new Promise(function(c){var d=Ra+Sa*b.P;a.a(d,d+Ta,function(a){a=L(Aa,Aa.Fields,a,b.v);c(a)})})}function gb(a,b){return new Promise(function(c){var d=b.oa;a.a(d,C(d,w(Ua)),function(a){a=L(Da,Da.Fields,a,b.v);c(a)})})}
function hb(a,b,c,d){return new Promise(function(g){var f=c.ea+8,e=C(d,w(Va+c.la*f));a.a(d,e,function(a){var d;d=new DataView(a,0,Va);d=M(Oa,Oa.Fields,d,b.v);for(var e=[],p=0;p<d.count;++p)e.push(d.C?La(new DataView(a,Va+p*f,f),c.ea,b.v):Fa(new DataView(a,Va+p*f,f),c.ea,b.v));g({node:d,items:e})})})}
function ib(a,b){return new Promise(function(c){var d=null;gb(a,b).then(function(g){function f(c){var d=[];u.fast.forEach(c.items,function(e){var p=new xa({key:e.key});c.node.C?(p.chrId=e.J,p.chrSize=e.ma):hb(a,b,g,e.sa).then(function(a){p.children=f(a)});d.push(p)});return d}var e=C(b.oa,w(Ua));hb(a,b,g,e).then(function(a){a=f(a);d=new xa({children:a});c(new V(d))})})})}function jb(a,b,c){return new Promise(function(d){c=c||b.ca;a.a(c,C(c,w(Wa)),function(a){a=L(ua,ua.Fields,a,b.v);d(a)})})}
function kb(a,b,c){return new Promise(function(d){a.a(c,C(c,w(Xa)),function(a){a=L(wa,wa.Fields,a,b.v);d(a)})})}function lb(a,b,c){return new Promise(function(d){kb(a,b,c).then(function(g){var f=C(c,w(Xa)),e=g.C?Za:Ya,h=C(f,w(g.count*e));a.a(f,h,function(a){for(var c=[],f=0;f<g.count;++f)c.push(g.C?Na(new DataView(a,f*e,e),b.v):Ha(new DataView(a,f*e,e),b.v));d({node:g,items:c})})})})}
function mb(a,b,c){return new Promise(function(d){a.a(c.l,C(c.l,c.L),function(a){a=new Uint8Array(a,0);a=(new Zlib.Inflate(a)).decompress();var c;c=new DataView(a.buffer,0,$a);c=M(R,R.Fields,c,b.v);for(var e=[],h=bb[c.type][1],n=N(bb[c.type][0]),k=0;k<c.da;++k)e[k]=h(new DataView(a.buffer,$a+n*k,n),b.v);d({xa:c,ha:e})})})}
function nb(a,b,c){return new Promise(function(d){a.a(c.l,C(c.l,c.L),function(a){a=new Uint8Array(a,0);a=(new Zlib.Inflate(a)).decompress();for(var c=a.byteLength/ab,e=Array(c),h=0;h<c;++h){var n=h,k;k=new DataView(a.buffer,h*ab,ab);k=M(va,va.Fields,k,b.v);e[n]=k}d({ha:e})})})}
function ob(a,b,c,d){return new Promise(function(g){lb(a,b,d).then(function(d){if(d.node.C){var e=[];u.fast.forEach(d.items,function(a){e.push(new ta({C:!0,O:a.I,A:a.A,M:a.G,B:a.B,l:a.l,L:a.L}))});g(e)}else{var h=[];u.async.each(d.items,function(d){return new Promise(function(e){var f=new ta({C:!1,O:d.I,A:d.A,M:d.G,B:d.B,l:d.l});h.push(f);c&&d.I>c.chr&&d.G<c.chr?e():c&&(d.G==c.chr&&d.B<=c.start||d.I==c.chr&&d.A>=c.end)?e():ob(a,b,c,d.l).then(function(a){f.children=a;e()})})}).then(function(){g(h)})}})})}
function pb(a,b,c,d){return new Promise(function(g){d=d||b.ca;jb(a,b,d).then(function(f){var e=C(d,w(Wa)),h=new ta({C:!1,O:f.I,M:f.G,A:f.A,B:f.B,l:e});ob(a,b,c,e).then(function(a){h.children=a;g(new ra(h))})})})};function Z(a,b,c){this.ka=a;this.j=b;this.m=c||null}m(Z,P);Object.defineProperties(Z.prototype,{chrName:{get:function(){return this.m?this.m.U(this.chr).key:this.chr}},chr:{get:function(){return this.j.J}},start:{get:function(){return this.j.start}},end:{get:function(){return this.j.end}}});
Z.prototype.value=function(a){var b=Q;switch(a){case b.MIN:return this.j.ga;case b.MAX:return this.j.fa;case b.SUM:return this.j.W;case b.SUMSQ:return this.j.X;case b.NORM:return Math.sqrt(this.j.X/this.j.ia);case b.CNT:return this.j.ia;default:return this.j.W/this.j.ia}};function qb(a,b,c){this.a=new Pa(a,b,c);this.H=this.D=this.R=this.m=this.F=this.o=null;this.ja=!1;this.Z=this.Y=null;this.S=!1;var d=this;this.$=new Promise(function(a,b){d.Y=a;d.Z=b})}
qb.prototype.c=function(a,b){var c=this,d,g=new Promise(function(a){d=a});if(!this.S)return this.initialized.then(function(){c.c(a,b).then(d)}),g;var f;a&&(f=this.m.U(a.chr).chrId,a={chr:f,start:a.start,end:a.end});if(b&&void 0==b.level&&(b.maxItems&&0<b.maxItems||b.maxBases&&0<b.maxBases)){b.maxBases||(b.maxBases=b.maxItems);b.maxItems||(b.maxItems=b.maxBases);f=u.fast.map(this.D,function(a){return a.wa});var e=-1,h=a?a.end-a.start:u.fast.map(this.m.leaves,function(a){return a.chrSize}).reduce(function(a,
b){return a+b});h>b.maxBases&&++e;if(0==e)for(;e<this.D.length-1&&!(h/f[e]<=b.maxItems);++e);b.level=e}var n=b&&0<=b.level;f=n?this.H[b.level]:this.R;if(!f)return pb(this.a,this.o,a,n?this.D[b.level].ta:this.o.ca).then(function(e){n?c.H[b.level]=e:c.R=e;c.c(a,b).then(d)}),g;f=sa(f,a);var k=0;u.fast.forEach(f,function(e){e.C||(++k,ob(c.a,c.o,a,e.l).then(function(f){e.children=f;--k;k||c.c(a,b).then(d)}))});if(k)return g;k=0;u.fast.forEach(f,function(e){e.K||(++k,n?nb(c.a,c.o,e).then(function(f){e.K=
u.fast.map(f.ha,function(a){return new Z(e,a,c.m)});--k;k||c.c(a,b).then(d)}):mb(c.a,c.o,e).then(function(f){e.K=u.fast.map(f.ha,function(a,b){return new S(e,f.xa,a,b,c.m)});--k;k||c.c(a,b).then(d)}))});if(k)return g;f=u.fast.concat(u.fast.map(f,function(b){return a?u.fast.filter(b.K,function(b){return b.chr==a.chr&&b.start<a.end&&b.end>a.start}):b.K}));d(f);return g};
Object.defineProperties(qb.prototype,{initialized:{get:function(){if(this.ja)return this.$;this.ja=!0;rb(this);return this.$}},summary:{get:function(){return this.F?{basesCovered:this.F.qa.toString(),min:this.F.ga,max:this.F.fa,sumData:this.F.W,sumSquares:this.F.X}:null}},chromosomes:{get:function(){return this.m?this.m.leaves:null}},zoomLevels:{get:function(){return this.o?this.o.P:null}}});
function rb(a){var b,c=new Promise(function(a){b=a});if(!a.o)return cb(a.a).then(function(c){a.o=c;rb(a).then(b)}),c;if(!a.F)return fb(a.a,a.o).then(function(c){a.F=c;rb(a).then(b)}),c;if(!a.m)return ib(a.a,a.o).then(function(c){a.m=c;rb(a).then(b)}),c;if(!a.D)return eb(a.a,a.o).then(function(c){a.D=c;rb(a).then(b)}),c;a.H||(a.H=Array(a.o.P));a.S=!0;a.Y(a);return a.$};l("bigwig.BigwigFile",qb);qb.prototype.query=qb.prototype.c;l("bigwig.ChrTree",V);V.prototype.getLeaf=V.prototype.U;l("bigwig.ChrTree.Node",xa);S.prototype.value=S.prototype.value;Z.prototype.value=Z.prototype.value;l("bigwig.DataRecord",P);P.prototype.value=P.prototype.value;l("bigwig.DataRecord.Aggregate",Q);}).call(this); //@ sourceMappingURL=bigwig.min.js.map
